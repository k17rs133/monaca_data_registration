<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="keys.js"></script>
    <script>
        var ncmb = new NCMB(appKey, clientKey);

        function startDemo() {
            var TestClass = ncmb.DataStore("TestClass");
            var testClass = new TestClass();
            var key="message";
            var value="Hello,NCMB!";
            testClass.set(key,value);
            testClass.save()
              .then(function() {
                    // 保存完了後に実行される
                    alert("New object created with objectId:"+testClass.objectId);
                })
                .catch(function(error) {
                    // エラー時に実行される
                    alert("Failed to create new object,with error code:"+error.text);
                });
        }

        function fetchDemo(){
          var TestClass=ncmb.DataStore("TestClass");
          TestClass.fetch()
          .then(function(results){
            var data=results.get("message");
            var update=results.get("updateDate");
            $("#fetch").html(data+":"+update);
          })
        }

        function fetchAll(){
          var TestClass=ncmb.DataStore("TestClass");
          TestClass.fetchAll()
          .then(function(resurts){
            var msg="";
            for(var i=0;i<resurts.length;i++){
              var data=resurts[i].get("message");
              var update=results[i].get("updateDate");
              msg += data+":"+update;
            }
            $("#fetch").html(msg);
          })
        }

        var appkey="アプリケーションキー";
        var clikey="クライアントキー";
        var ncmb=new NCMB(appkey,clikey);
        var TestClass2=ncmb.DataStone(TestClass2);
        var testClass2=new TestClass2();
        testClass2.set("message2","hello,worid")
        .save()
        .then(function(m){
          alert("success:"+JSON.stringify(m));
        })
        .catch(function(m){
          alert("fail:"+JSON.stringify(m));
        });

   function fetchDemo(){
     var TestClass=ncmb.DataStore("TestClass");
     TestClass.fetch()
     .then(function(results){
       var data=results.get("message");
       var update=results.get("updateDate");
       $("#fetch").html(data+":"+update);
     }
   })
    </script>
</head>
<body>
    <h1>NiftyCloud mobile backend!</h1>
    <a class="button--large" onclick="startDemo()">Start Demo</a>
    <div>Touch Start Demo to save {"message":"Hello, NCMB!"} to 
      mobile backend.</div>
    <a class="button--large" onclick="fetchDemo()">Fetch Demo</a>
    <div>fetch damo</div>
    <a class="button--large" onclick="fetchAll()">Fetch All</a>
    <div>fetch all demo</div>
    <div id="fetch">data here </div>
</body>
</html>
